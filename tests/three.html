<html>
  <head>
    <title>HotDrink Test</title>
    <script type="text/javascript" src="../hotdrink.js"></script>
    <script type="text/javascript">
var m;
function init() {
  m= hd.makeModel( {left: 0, top: 0, right: undefined, bottom: undefined,
                    width: 200, height: 200, aspect: undefined} );

  m.constraint( 'left', 'right', 'width' )
    .method( 'left', function() { return this.width - this.right; } )
    .method( 'right', function() { return this.left + this.width; } )
    .method( 'width', function() { return this.right - this.left; } );

  m.constraint( 'top', 'bottom', 'height' )
    .method( 'top', function() { return this.height - this.bottom; } )
    .method( 'bottom', function() { return this.top + this.height; } )
    .method( 'height', function() { return this.bottom - this.top; } );

  m.constraint( 'width', 'height', 'aspect' )
    .method( 'width', function() { return this.height * this.aspect; } )
    .method( 'height', function() { return this.width / this.aspect; } )
    .method( 'aspect', function() { return this.width / this.height; } );

  var left= new hd.binders.number( document.getElementById( 'left' ) );
  m.left.subscribe( left );
  left.subscribe( m.left );

  var right= new hd.binders.number( document.getElementById( 'right' ) );
  m.right.subscribe( right );
  right.subscribe( m.right );

  var top= new hd.binders.number( document.getElementById( 'top' ) );
  m.top.subscribe( top );
  top.subscribe( m.top );

  var bottom= new hd.binders.number( document.getElementById( 'bottom' ) );
  m.bottom.subscribe( bottom );
  bottom.subscribe( m.bottom );

  var width= new hd.binders.number( document.getElementById( 'width' ) );
  m.width.subscribe( width );
  width.subscribe( m.width );

  var height= new hd.binders.number( document.getElementById( 'height' ) );
  m.height.subscribe( height );
  height.subscribe( m.height );

  var aspect= new hd.binders.number( document.getElementById( 'aspect' ) );
  m.aspect.subscribe( aspect );
  aspect.subscribe( m.aspect );
}
    </script>
  </head>
  <body onload="init()">
    <table>
      <tr>
        <td>Left:</td>
        <td><input type="text" id="left"/></td>
        <td>Right:</td>
        <td><input type="text" id="right"/></td>
        <td>Width:</td>
        <td><input type="text" id="width"/></td>
        <td rowspan="2">Aspect:</td>
        <td rowspan="2"><input type="text" id="aspect"/></td>
      </tr>
      <tr>
        <td>Top:</td>
        <td><input type="text" id="top"/></td>
        <td>Bottom:</td>
        <td><input type="text" id="bottom"/></td>
        <td>Height:</td>
        <td><input type="text" id="height"/></td>
      </tr>
    </table>
  </body>
</html>
